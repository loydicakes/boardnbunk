<link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet" />
<ion-content [fullscreen]="true" class="main-page ion-padding">

  <div class="top-part">
    <div class="header-part">
      <img src="assets/logob.png" class="header-logo"/>
      <h5>Board n' Bunk</h5>
      <ion-button size="small" fill="clear" class="notif-button" (click)="openNotifications()">
        <ion-icon name="notifications" slot="icon-only"></ion-icon>
      </ion-button>
    </div>

    <div class="custom-search-wrapper">
      <input
        type="text"
        placeholder="Search..."
        class="custom-search-input"
        [(ngModel)]="searchTerm"
        (input)="applyFilters()"
      />
      <ion-icon name="search-outline" class="search-icon"></ion-icon>
    </div>
  </div>

  <div class="featured-rooms-part">
    <h3>Featured</h3>
    <div class="img-container">
      <img src="assets/room/room1.jpg" alt="" />
      <img src="assets/room/room2.jpg" alt="" />
      <img src="assets/room/room3.jpg" alt="" />
    </div>
  </div>

  <div class="categ-part">
    <h3>Categories</h3>
    <div class="button-container">
      <ion-button
        [color]="selectedType === '' ? 'primary' : 'medium'"
        (click)="filterRooms('')"
        >All</ion-button
      >
      <ion-button
        [color]="selectedType === 'solo' ? 'primary' : 'medium'"
        (click)="filterRooms('solo')"
        >Solo</ion-button
      >
      <ion-button
        [color]="selectedType === 'studio' ? 'primary' : 'medium'"
        (click)="filterRooms('studio')"
        >Studio Type</ion-button
      >
      <ion-button
        [color]="selectedType === 'bedspacer' ? 'primary' : 'medium'"
        (click)="filterRooms('bedspacer')"
        >Bed Spacer</ion-button
      >
    </div>
  </div>

  <div class="explore-part" style="margin-bottom: 100px;">
    <h3>Explore</h3>
    <div class="explore-img-container">
      <ion-card class="hotel-card" *ngFor="let room of filteredRooms">
        <div class="card-wrapper">
          <!-- ✅ Heart icon BEFORE image -->
          <ion-button fill="clear" class="heart-btn" (click)="toggleFavorite(room)">
            <ion-icon [name]="room.isFavorite ? 'heart' : 'heart-outline'"></ion-icon>
          </ion-button>

          <!-- ✅ Room image -->
          <ion-img [src]="'https://via.placeholder.com/100'" [routerLink]="['/infos', room.id]"></ion-img>

          <!-- Room content -->
          <ion-card-content class="ion-padding">
            <div class="hotel-header">
              <h2>{{ room.name }}</h2>
              <div class="hotel-header-fav">
                <ion-icon name="star" class="star-icon"></ion-icon>
                <span>4.9</span>
              </div>
            </div>
            <p id="last"><span>₱ {{ room.price }}</span> per Month</p>
          </ion-card-content>
        </div>
      </ion-card>

    </div>
  </div>
</ion-content>

<ion-footer class="custom-tab-bar">
  <div class="tab-container">
    <ion-button fill="clear" routerLink="/homepage"
      ><ion-icon name="home" class="tab-icon" color="light"></ion-icon
    ></ion-button>
    <ion-button fill="clear" routerLink="/faves"
      ><ion-icon name="heart" class="tab-icon" color="light"></ion-icon
    ></ion-button>
    <ion-button fill="clear" routerLink="/current-rent"
      ><ion-icon name="mail" class="tab-icon" color="light"></ion-icon
    ></ion-button>
    <ion-button fill="clear" routerLink="/profile"
      ><ion-icon name="person" class="tab-icon" color="light"></ion-icon
    ></ion-button>
  </div>
</ion-footer>
