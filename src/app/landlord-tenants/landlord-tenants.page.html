<ion-content [fullscreen]="true">
  <div id="container">

    <h4 class="title">Tenants</h4>

    <div class="current-section">
      <h3>Current</h3>
      <ng-container *ngIf="tenants.length > 0; else noTenants">
        <div class="tenant-card" *ngFor="let tenant of tenants" (click)="openTenantModal(tenant)">
          <img [src]="tenant.image" class="tenant-img" />
          <div class="tenant-content">
            <strong>{{ tenant.name }}</strong>

            <div class="badge-column">
              <div class="badge-group">
                <label>Room:</label>
                <span class="badge room-tag">{{ tenant.roomName }}</span>
              </div>
              <div class="badge-group">
                <label>Room Type:</label>
                <span class="badge type-tag">{{ tenant.roomType }}</span>
              </div>
              <div class="badge-group">
                <label>Payment Method:</label>
                <span class="badge method-tag">{{ tenant.paymentMethod }}</span>
              </div>
            </div>

            <div class="payment-dates">
              <span>
                <label>Last Paid</label><br />
                {{ tenant.lastPaid ? (tenant.lastPaid.toDate() | date:'mediumDate') : 'Not yet paid' }}
              </span>
              <span>
                <label>Next Due</label><br />
                {{ tenant.nextDue ? (tenant.nextDue.toDate() | date:'mediumDate') : 'Not yet set' }}
              </span>
            </div>
          </div>
        </div>

      </ng-container>
      <ng-template #noTenants>
        <p class="empty-msg">No current tenants</p>
      </ng-template>

      <h3>Approval</h3>
      <ng-container *ngIf="approvalTenants.length > 0; else noApprovals">
        <div class="tenant-card approval-card" *ngFor="let tenant of approvalTenants"
          (click)="openApprovalModal(tenant, $event)">
          <img [src]="tenant.image" class="tenant-img" />
          <div class="tenant-content">
            <strong>{{ tenant.name }}</strong>
            <p><strong>Room:</strong> {{ tenant.roomName }}</p>
            <p><strong>Room Type:</strong> {{ tenant.roomType }}</p>
            <p><strong>Payment Method:</strong> {{ tenant.paymentMethod }}</p>
            <div class="approval-buttons">
              <button (click)="declineTenant(tenant.id)">Decline</button>
              <button (click)="approveTenant(tenant.id)">Approve</button>
            </div>
          </div>
        </div>
      </ng-container>
      <ng-template #noApprovals>
        <p class="empty-msg">No approval requests</p>
      </ng-template>
    </div>

  </div>
</ion-content>

<!-- Bottom Tab Bar -->
<ion-footer class="custom-tab-bar">
  <div class="tab-container">
    <ion-button fill="clear" routerLink="/landlord-home"><ion-icon name="home" class="tab-icon" color="light"></ion-icon></ion-button>
    <ion-button fill="clear" routerLink="/message"><ion-icon name="chatbubbles" class="tab-icon" color="light"></ion-icon></ion-button>
    <ion-button fill="clear" routerLink="/landlord-tenants"><ion-icon name="people-circle" class="tab-icon" color="light"></ion-icon></ion-button>
  </div>
</ion-footer>

